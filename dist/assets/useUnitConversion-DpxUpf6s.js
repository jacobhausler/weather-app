import{r as d}from"./vendor-CrRmGii_.js";function h(r,c){const l=typeof window<"u",[u,g]=d.useState(()=>{if(!l)return c;try{const o=window.localStorage.getItem(r);return o?JSON.parse(o):c}catch(o){return console.warn(`Error reading localStorage key "${r}":`,o),c}}),w=d.useCallback(o=>{if(!l){console.warn("localStorage is not available");return}try{const e=o instanceof Function?o(u):o;g(e),window.localStorage.setItem(r,JSON.stringify(e))}catch(e){console.warn(`Error setting localStorage key "${r}":`,e)}},[r,u,l]),S=d.useCallback(()=>{if(!l){console.warn("localStorage is not available");return}try{window.localStorage.removeItem(r),g(c)}catch(o){console.warn(`Error removing localStorage key "${r}":`,o)}},[r,c,l]);return d.useEffect(()=>{if(!l)return;const o=e=>{if(e.key===r&&e.newValue!==null)try{g(JSON.parse(e.newValue))}catch(n){console.warn(`Error parsing localStorage value for key "${r}":`,n)}};return window.addEventListener("storage",o),()=>{window.removeEventListener("storage",o)}},[r,l]),[u,w,S]}function p(){const[r,c]=h("unit-system","imperial");return{unitSystem:r,setUnitSystem:c,toggleUnitSystem:()=>{c(r==="imperial"?"metric":"imperial")},convertTemperature:(e,n,m)=>{const i=m||(r==="metric"?"C":"F");if(n===i)return{value:Math.round(e),unit:i};let t;return n==="C"&&i==="F"?t=e*9/5+32:t=(e-32)*5/9,{value:Math.round(t),unit:i}},convertWindSpeed:(e,n,m)=>{const i=m||(r==="metric"?"km/h":"mph");let t;n==="wmoUnit:m_s-1"||n==="m/s"?t=e:n==="wmoUnit:km_h-1"||n==="km/h"?t=e/3.6:t=e*.44704;let s,a;return i==="m/s"?(s=t,a="m/s"):i==="km/h"?(s=t*3.6,a="km/h"):(s=t/.44704,a="mph"),{value:Math.round(s),unit:a}},convertVisibility:(e,n,m)=>{const i=m||(r==="metric"?"km":"mi");let t;n==="wmoUnit:m"||n==="m"?t=e:n==="km"?t=e*1e3:t=e*1609.34;let s,a;return i==="m"?(s=t,a="m"):i==="km"?(s=t/1e3,a="km"):(s=t/1609.34,a="mi"),{value:Math.round(s*10)/10,unit:a}},convertPressure:(e,n,m)=>{const i=m||(r==="metric"?"hPa":"inHg");let t;n==="wmoUnit:Pa"?t=e:n==="hPa"||n==="mb"?t=e*100:t=e*3386.39;let s,a;return i==="inHg"?(s=t/3386.39,a="inHg"):i==="hPa"?(s=t/100,a="hPa"):(s=t/100,a="mb"),{value:Math.round(s*100)/100,unit:a}},parseUnitCode:e=>e.startsWith("wmoUnit:")?e.replace("wmoUnit:","").replace("_"," ").replace("-1","/s"):e}}export{h as a,p as u};
