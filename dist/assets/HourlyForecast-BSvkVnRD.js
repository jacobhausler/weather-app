import{p as L,V as M,j as e,q as b,r as P,s as V,t as N,u as F,v as S,w as U,x as $,y as C,z as T,A as k,B as I}from"./ui-BbEAuUw2.js";import{G as A}from"./glass-card-DmqTF9hi.js";import{b as u,f as z,p as O,e as W,u as G,C as J,k as K,B as x,d as X,i as Y,g as q,j as Q,h as Z}from"./index-D6Jah97x.js";import{r as i}from"./vendor-CrRmGii_.js";import{R as _,B as ee,C as te,X as ae,Y as re,T as se,L as oe,a as ne}from"./charts-8ILbS6lk.js";import{f as le}from"./utils-DzfkJJIA.js";import"./zustand-D4WnGny0.js";const ie=L,de=M,D=i.forwardRef(({className:a,children:r,...t},n)=>e.jsxs(b,{ref:n,className:u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...t,children:[r,e.jsx(P,{asChild:!0,children:e.jsx(z,{className:"h-4 w-4 opacity-50"})})]}));D.displayName=b.displayName;const R=i.forwardRef(({className:a,...r},t)=>e.jsx(C,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:e.jsx(W,{className:"h-4 w-4"})}));R.displayName=C.displayName;const B=i.forwardRef(({className:a,...r},t)=>e.jsx(T,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:e.jsx(z,{className:"h-4 w-4"})}));B.displayName=T.displayName;const H=i.forwardRef(({className:a,children:r,position:t="popper",...n},c)=>e.jsx(V,{children:e.jsxs(N,{ref:c,className:u("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,...n,children:[e.jsx(R,{}),e.jsx(F,{className:u("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(B,{})]})}));H.displayName=N.displayName;const ce=i.forwardRef(({className:a,...r},t)=>e.jsx(k,{ref:t,className:u("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r}));ce.displayName=k.displayName;const f=i.forwardRef(({className:a,children:r,...t},n)=>e.jsxs(S,{ref:n,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(U,{children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsx($,{children:r})]}));f.displayName=S.displayName;const ue=i.forwardRef(({className:a,...r},t)=>e.jsx(I,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...r}));ue.displayName=I.displayName;function y(a,r){const t=typeof window<"u",[n,c]=i.useState(()=>{if(!t)return r;try{const o=window.localStorage.getItem(a);return o?JSON.parse(o):r}catch(o){return console.warn(`Error reading localStorage key "${a}":`,o),r}}),g=i.useCallback(o=>{if(!t){console.warn("localStorage is not available");return}try{const d=o instanceof Function?o(n):o;c(d),window.localStorage.setItem(a,JSON.stringify(d))}catch(d){console.warn(`Error setting localStorage key "${a}":`,d)}},[a,n,t]),v=i.useCallback(()=>{if(!t){console.warn("localStorage is not available");return}try{window.localStorage.removeItem(a),c(r)}catch(o){console.warn(`Error removing localStorage key "${a}":`,o)}},[a,r,t]);return i.useEffect(()=>{if(!t)return;const o=d=>{if(d.key===a&&d.newValue!==null)try{c(JSON.parse(d.newValue))}catch(j){console.warn(`Error parsing localStorage value for key "${a}":`,j)}};return window.addEventListener("storage",o),()=>{window.removeEventListener("storage",o)}},[a,t]),[n,g,v]}function je({hourlyForecast:a}){const{unitSystem:r}=G(),[t,n]=y("hourly-chart-dataType","temperature"),[c,g]=y("hourly-chart-period","24"),v=()=>{const s=parseInt(c);return a.slice(0,s)},o=s=>Math.round(Z(s,r)),d=s=>{if(!s)return 0;const l=s.match(/(\d+)/),m=l&&l[1]?parseInt(l[1],10):0;return Math.round(Q(m,r))},p=v().map(l=>{const m=le(new Date(l.startTime),"ha");switch(t){case"temperature":return{time:m,value:o(l.temperature),label:"Temperature",unit:q(r)};case"precipitation":return{time:m,value:l.probabilityOfPrecipitation?.value||0,label:"Precipitation",unit:"%"};case"wind":return{time:m,value:d(l.windSpeed),label:"Wind Speed",unit:Y(r)};case"humidity":return{time:m,value:l.relativeHumidity.value,label:"Humidity",unit:"%"};default:return{time:m,value:0,label:"",unit:""}}}),h=p[0]?.unit||"",E=()=>{switch(t){case"temperature":return"hsl(var(--chart-1))";case"precipitation":return"hsl(var(--chart-2))";case"wind":return"hsl(var(--chart-3))";case"humidity":return"hsl(var(--chart-4))";default:return"hsl(var(--chart-1))"}},w=s=>{switch(s){case"temperature":return"Temperature";case"precipitation":return"Precipitation";case"wind":return"Wind Speed";case"humidity":return"Humidity";default:return s}};return e.jsxs(A,{blur:"lg",interactive:!0,className:"shadow-glass",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(K,{className:"text-white dark:text-gray-100",children:"Hourly Forecast"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(ie,{value:c,onValueChange:s=>g(s),children:[e.jsx(D,{className:"w-[110px]","aria-label":"Time period selection",children:e.jsx(de,{})}),e.jsxs(H,{children:[e.jsx(f,{value:"12",children:"12 Hours"}),e.jsx(f,{value:"24",children:"24 Hours"}),e.jsx(f,{value:"48",children:"48 Hours"})]})]}),e.jsxs("div",{className:"flex gap-1.5",role:"group","aria-label":"Data type selection",children:[e.jsx(x,{size:"sm",variant:t==="temperature"?"default":"outline",onClick:()=>n("temperature"),children:"Temp"}),e.jsx(x,{size:"sm",variant:t==="precipitation"?"default":"outline",onClick:()=>n("precipitation"),children:"Precip"}),e.jsx(x,{size:"sm",variant:t==="wind"?"default":"outline",onClick:()=>n("wind"),children:"Wind"}),e.jsx(x,{size:"sm",variant:t==="humidity"?"default":"outline",onClick:()=>n("humidity"),children:"Humidity"})]})]})]})}),e.jsxs(X,{children:[e.jsx("div",{className:"h-[250px] w-full bg-transparent",children:e.jsx(_,{width:"100%",height:"100%",className:"bg-transparent",children:e.jsxs(ee,{data:p,children:[e.jsx(te,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ae,{dataKey:"time",tick:{fontSize:12},className:"text-muted-foreground"}),e.jsx(re,{tick:{fontSize:12},className:"text-muted-foreground",label:{value:h,angle:-90,position:"insideLeft",style:{fontSize:12}}}),e.jsx(se,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},labelStyle:{color:"hsl(var(--popover-foreground))"},itemStyle:{color:"hsl(var(--popover-foreground))"},formatter:s=>[`${s}${h}`,w(t)]}),e.jsx(oe,{wrapperStyle:{fontSize:12},formatter:()=>w(t)}),e.jsx(ne,{dataKey:"value",fill:E(),radius:[4,4,0,0],name:w(t)})]})})}),e.jsxs("div",{className:"mt-3 flex justify-around rounded-lg bg-white/10 dark:bg-black/20 backdrop-blur-md border border-white/20 p-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Min"}),e.jsxs("div",{className:"font-semibold",children:[Math.min(...p.map(s=>s.value)),h]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Max"}),e.jsxs("div",{className:"font-semibold",children:[Math.max(...p.map(s=>s.value)),h]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Avg"}),e.jsxs("div",{className:"font-semibold",children:[Math.round(p.reduce((s,l)=>s+l.value,0)/p.length),h]})]})]})]})]})}export{je as HourlyForecast};
