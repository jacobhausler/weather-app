import{k as V,j as e,l as Y,m as D,n as Z,o as T,O as C,D as P}from"./ui-BbEAuUw2.js";import{r as l}from"./vendor-CrRmGii_.js";import{G as _}from"./glass-card-BA2eKgLX.js";import{b as p,X as F,u as S,g as M,h as O,i as E,j as W,C as ee,k as te,d as se}from"./index-CWASQjVY.js";import{W as $,a as z,D as I,C as ae}from"./WeatherIcon-rPnb-dRV.js";import{f as re}from"./utils-DzfkJJIA.js";import"./zustand-D4WnGny0.js";const ie=V,ne=Y,L=l.forwardRef(({className:s,...i},o)=>e.jsx(C,{ref:o,className:p("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i}));L.displayName=C.displayName;const R=l.forwardRef(({className:s,children:i,...o},c)=>e.jsxs(ne,{children:[e.jsx(L,{}),e.jsxs(D,{ref:c,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[i,e.jsxs(Z,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));R.displayName=D.displayName;const U=({className:s,...i})=>e.jsx("div",{className:p("flex flex-col space-y-1.5 text-center sm:text-left",s),...i});U.displayName="DialogHeader";const A=l.forwardRef(({className:s,...i},o)=>e.jsx(T,{ref:o,className:p("text-lg font-semibold leading-none tracking-tight",s),...i}));A.displayName=T.displayName;const le=l.forwardRef(({className:s,...i},o)=>e.jsx(P,{ref:o,className:p("text-sm text-muted-foreground",s),...i}));le.displayName=P.displayName;function oe({period:s,open:i,onClose:o}){const{unitSystem:c}=S();if(!s)return null;const N=n=>Math.round(O(n,c)),f=n=>{if(!n)return"N/A";const h=n.match(/(\d+)/);if(!h||!h[1])return n;const x=parseInt(h[1],10),j=Math.round(W(x,c)),y=E(c);return n.replace(/\d+/,j.toString()).replace("mph",y)},v=n=>{try{return re(new Date(n),"EEEE, MMM d, h:mm a")}catch{return n}},b=M(c),u=N(s.temperature);return e.jsx(ie,{open:i,onOpenChange:o,children:e.jsxs(R,{className:"max-w-2xl max-h-[80vh] overflow-y-auto bg-white/20 dark:bg-black/30 backdrop-blur-2xl border border-white/30 dark:border-white/15 shadow-glass-lg","aria-describedby":"forecast-description",children:[e.jsx(U,{children:e.jsx(A,{className:"text-2xl text-white dark:text-gray-100",children:s.name})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx($,{nwsIconUrl:s.icon,shortForecast:s.shortForecast,size:"lg",className:"h-24 w-24"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-4xl font-bold text-white dark:text-gray-100",children:[u,b]}),s.temperatureTrend&&e.jsxs("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:["Trending ",s.temperatureTrend]}),e.jsx("div",{className:"mt-1 text-lg text-gray-900 dark:text-gray-100",children:s.shortForecast})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border p-3",children:[e.jsx(z,{className:"h-5 w-5 text-gray-900 dark:text-gray-100"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-900 dark:text-gray-100",children:"Wind"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[s.windDirection," ",f(s.windSpeed)]})]})]}),s.probabilityOfPrecipitation?.value!==null&&s.probabilityOfPrecipitation?.value!==void 0&&e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border p-3",children:[e.jsx(I,{className:"h-5 w-5 text-gray-900 dark:text-gray-100"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-900 dark:text-gray-100",children:"Precipitation"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:[s.probabilityOfPrecipitation.value,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 rounded-lg border p-3",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-900 dark:text-gray-100"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-900 dark:text-gray-100",children:"Day/Night"}),e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.isDaytime?"Day":"Night"})]})]})]}),e.jsx("div",{className:"rounded-lg bg-muted p-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Time Period"}),e.jsxs("div",{className:"mt-1 text-gray-900 dark:text-gray-100",children:[v(s.startTime)," - ",v(s.endTime)]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 font-semibold text-white dark:text-gray-100",children:"Detailed Forecast"}),e.jsx("p",{id:"forecast-description",className:"text-sm leading-relaxed text-gray-900 dark:text-gray-100",children:s.detailedForecast})]})]})]})})}function fe({forecast:s}){const{unitSystem:i}=S(),[o,c]=l.useState(null),[N,f]=l.useState(!1),[v,b]=l.useState(!1),u=l.useRef(null),[n,h]=l.useState(null);l.useEffect(()=>{const t=()=>{const r=u.current;if(r){const d=r.scrollWidth>r.clientWidth,m=r.scrollWidth-r.scrollLeft<=r.clientWidth+10;b(d&&!m)}};t();const a=u.current;return a&&(a.addEventListener("scroll",t),window.addEventListener("resize",t)),()=>{a&&a.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[s]);const x=t=>Math.round(O(t,i)),j=t=>{if(!t)return"N/A";const a=t.match(/(\d+)/);if(!a||!a[1])return t;const r=parseInt(a[1],10),d=Math.round(W(r,i)),m=E(i);return t.replace(/\d+/,d.toString()).replace("mph",m)},y=[];for(let t=0;t<s.length;t++){const a=s[t];if(a&&a.isDaytime){const r=s[t+1];y.push({day:a,night:r&&!r.isDaytime?r:void 0}),r&&!r.isDaytime&&t++}}const H=y.slice(0,7),B=l.useCallback((t,a)=>{a&&h(a),c(t),f(!0)},[]),G=l.useCallback(()=>{f(!1),setTimeout(()=>{n?.focus()},0)},[n]),k=t=>t.replace(" Night","").replace(" Afternoon",""),g=M(i),X=(t,a)=>{const r=a===0?"Today":k(t.day.name),d=x(t.day.temperature),m=t.night?.temperature?x(t.night.temperature):null,q=m!==null?`High ${d}${g}, Low ${m}${g}`:`${d}${g}`,J=t.day.shortForecast,w=t.day.probabilityOfPrecipitation?.value,K=w!=null?`${w}% chance of precipitation`:null,Q=`Wind ${t.day.windDirection} at ${j(t.day.windSpeed)}`;return[`${r}:`,q,J,K,Q,"Click to view detailed forecast."].filter(Boolean).join(". ")};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{blur:"lg",gradient:!0,interactive:!0,className:"shadow-glass border border-white/30 dark:border-white/15",children:[e.jsx(ee,{children:e.jsx(te,{className:"text-white dark:text-gray-100",children:"7-Day Forecast"})}),e.jsx(se,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:u,className:"overflow-x-auto md:overflow-x-auto",children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4 pb-2",children:H.map((t,a)=>{const r=x(t.day.temperature),d=t.night?.temperature?x(t.night.temperature):void 0;return e.jsxs("button",{onClick:m=>B(t.day,m.currentTarget),className:"flex min-w-[140px] md:min-w-[140px] w-full md:w-auto flex-row md:flex-col items-center gap-4 md:gap-2 rounded-lg border p-4 transition-colors hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","aria-label":X(t,a),children:[e.jsx($,{nwsIconUrl:t.day.icon,shortForecast:t.day.shortForecast,size:"md",className:"h-16 w-16 shrink-0"}),e.jsxs("div",{className:"flex flex-col items-start md:items-center gap-2 w-full md:w-auto",children:[e.jsx("div",{className:"text-sm font-semibold",children:a===0?"Today":k(t.day.name)}),e.jsx("div",{className:"text-left md:text-center w-full",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:t.day.shortForecast})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:[r,g]}),d!==void 0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",d,g]})]}),e.jsxs("div",{className:"w-full flex md:flex-col gap-3 md:gap-1 text-xs text-muted-foreground",children:[t.day.probabilityOfPrecipitation?.value!==null&&t.day.probabilityOfPrecipitation?.value!==void 0&&e.jsxs("div",{className:"flex items-center md:justify-center gap-1",children:[e.jsx(I,{className:"h-3 w-3","aria-hidden":"true"}),e.jsxs("span",{children:[t.day.probabilityOfPrecipitation.value,"%"]})]}),e.jsxs("div",{className:"flex items-center md:justify-center gap-1",children:[e.jsx(z,{className:"h-3 w-3","aria-hidden":"true"}),e.jsxs("span",{className:"text-[10px]",children:[t.day.windDirection," ",j(t.day.windSpeed)]})]})]})]})]},t.day.number)})})}),v&&e.jsx("div",{className:"pointer-events-none absolute right-0 top-0 h-full w-16 bg-gradient-to-l from-card to-transparent"})]})})]}),e.jsx(oe,{period:o,open:N,onClose:G})]})}export{fe as SevenDayForecast};
