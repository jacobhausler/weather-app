import{p as G,V as J,j as e,q as k,r as W,s as K,t as D,u as X,v as z,w as Y,x as q,y as R,z as B,A as E,B as T}from"./ui-BbEAuUw2.js";import{G as Q}from"./glass-card-CmUMxEL2.js";import{b as p,f as H,p as Z,e as _,u as ee,C as te,k as re,B as g,d as ae,i as se,g as ne,j as oe,h as ie}from"./index--yk8PElr.js";import{r as c}from"./vendor-CrRmGii_.js";import{R as le,B as ce,C as de,X as ue,Y as I,T as me,L as pe,a as he}from"./charts-8ILbS6lk.js";import{f as fe}from"./utils-DzfkJJIA.js";import"./zustand-D4WnGny0.js";const xe=G,ge=J,L=c.forwardRef(({className:a,children:n,...t},i)=>e.jsxs(k,{ref:i,className:p("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...t,children:[n,e.jsx(W,{asChild:!0,children:e.jsx(H,{className:"h-4 w-4 opacity-50"})})]}));L.displayName=k.displayName;const M=c.forwardRef(({className:a,...n},t)=>e.jsx(R,{ref:t,className:p("flex cursor-default items-center justify-center py-1",a),...n,children:e.jsx(_,{className:"h-4 w-4"})}));M.displayName=R.displayName;const V=c.forwardRef(({className:a,...n},t)=>e.jsx(B,{ref:t,className:p("flex cursor-default items-center justify-center py-1",a),...n,children:e.jsx(H,{className:"h-4 w-4"})}));V.displayName=B.displayName;const A=c.forwardRef(({className:a,children:n,position:t="popper",...i},m)=>e.jsx(K,{children:e.jsxs(D,{ref:m,className:p("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,...i,children:[e.jsx(M,{}),e.jsx(X,{className:p("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(V,{})]})}));A.displayName=D.displayName;const we=c.forwardRef(({className:a,...n},t)=>e.jsx(E,{ref:t,className:p("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n}));we.displayName=E.displayName;const w=c.forwardRef(({className:a,children:n,...t},i)=>e.jsxs(z,{ref:i,className:p("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Y,{children:e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(q,{children:n})]}));w.displayName=z.displayName;const ve=c.forwardRef(({className:a,...n},t)=>e.jsx(T,{ref:t,className:p("-mx-1 my-1 h-px bg-muted",a),...n}));ve.displayName=T.displayName;function N(a,n){const t=typeof window<"u",[i,m]=c.useState(()=>{if(!t)return n;try{const o=window.localStorage.getItem(a);return o?JSON.parse(o):n}catch(o){return console.warn(`Error reading localStorage key "${a}":`,o),n}}),v=c.useCallback(o=>{if(!t){console.warn("localStorage is not available");return}try{const d=o instanceof Function?o(i):o;m(d),window.localStorage.setItem(a,JSON.stringify(d))}catch(d){console.warn(`Error setting localStorage key "${a}":`,d)}},[a,i,t]),j=c.useCallback(()=>{if(!t){console.warn("localStorage is not available");return}try{window.localStorage.removeItem(a),m(n)}catch(o){console.warn(`Error removing localStorage key "${a}":`,o)}},[a,n,t]);return c.useEffect(()=>{if(!t)return;const o=d=>{if(d.key===a&&d.newValue!==null)try{m(JSON.parse(d.newValue))}catch(y){console.warn(`Error parsing localStorage value for key "${a}":`,y)}};return window.addEventListener("storage",o),()=>{window.removeEventListener("storage",o)}},[a,t]),[i,v,j]}function De({hourlyForecast:a}){const{unitSystem:n}=ee(),[t,i]=N("hourly-chart-dataTypes",["temperature"]),[m,v]=N("hourly-chart-period","24"),[j,o]=N("hourly-chart-clickCount",0),d=()=>{const r=parseInt(m);return a.slice(0,r)},y=r=>Math.round(ie(r,n)),P=r=>{if(!r)return 0;const s=r.match(/(\d+)/),u=s&&s[1]?parseInt(s[1],10):0;return Math.round(oe(u,n))},U=(r,s)=>{switch(s){case"temperature":return y(r.temperature);case"precipitation":return r.probabilityOfPrecipitation?.value||0;case"wind":return P(r.windSpeed);case"humidity":return r.relativeHumidity.value;default:return 0}},h=r=>{switch(r){case"temperature":return ne(n);case"precipitation":return"%";case"wind":return se(n);case"humidity":return"%";default:return""}},S=d().map(s=>{const l={time:fe(new Date(s.startTime),"ha")};return t.forEach(x=>{l[x]=U(s,x)}),l}),F=r=>{switch(r){case"temperature":return"hsl(var(--chart-1))";case"precipitation":return"hsl(var(--chart-2))";case"wind":return"hsl(var(--chart-3))";case"humidity":return"hsl(var(--chart-4))";default:return"hsl(var(--chart-1))"}},f=r=>{if(t.length===0)i([r]),o(1);else if(t.length===1){const s=t[0];if(!s)return;s===r?(i([]),o(0)):(i([s,r]),o(2))}else if(t.length===2)if(t.includes(r))i(t.filter(s=>s!==r)),o(1);else{const s=j+1;if(o(s),(s%2===1?0:1)===0){const l=t[1];if(!l)return;i([r,l])}else{const l=t[0];if(!l)return;i([l,r])}}},C=r=>{switch(r){case"temperature":return"Temperature";case"precipitation":return"Precipitation";case"wind":return"Wind Speed";case"humidity":return"Humidity";default:return r}};return e.jsxs(Q,{blur:"lg",gradient:!0,interactive:!0,className:"shadow-glass border border-white/30 dark:border-white/15",children:[e.jsx(te,{children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(re,{className:"text-white dark:text-gray-100",children:"Hourly Forecast"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(xe,{value:m,onValueChange:r=>v(r),children:[e.jsx(L,{className:"w-[110px]","aria-label":"Time period selection",children:e.jsx(ge,{})}),e.jsxs(A,{children:[e.jsx(w,{value:"12",children:"12 Hours"}),e.jsx(w,{value:"24",children:"24 Hours"}),e.jsx(w,{value:"48",children:"48 Hours"})]})]}),e.jsxs("div",{className:"flex gap-1.5",role:"group","aria-label":"Data type selection",children:[e.jsx(g,{size:"sm",variant:t.includes("temperature")?"default":"outline",onClick:()=>f("temperature"),children:"Temp"}),e.jsx(g,{size:"sm",variant:t.includes("precipitation")?"default":"outline",onClick:()=>f("precipitation"),children:"Precip"}),e.jsx(g,{size:"sm",variant:t.includes("wind")?"default":"outline",onClick:()=>f("wind"),children:"Wind"}),e.jsx(g,{size:"sm",variant:t.includes("humidity")?"default":"outline",onClick:()=>f("humidity"),children:"Humidity"})]})]})]})}),e.jsxs(ae,{children:[e.jsx("div",{className:"h-[250px] w-full bg-transparent",children:e.jsx(le,{width:"100%",height:"100%",className:"bg-transparent",children:e.jsxs(ce,{data:S,children:[e.jsx(de,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(ue,{dataKey:"time",tick:{fontSize:12},className:"text-muted-foreground"}),t.length>0&&t[0]&&e.jsx(I,{yAxisId:"left",tick:{fontSize:12},className:"text-muted-foreground",label:{value:h(t[0]),angle:-90,position:"insideLeft",style:{fontSize:12}}}),t.length>1&&t[1]&&e.jsx(I,{yAxisId:"right",orientation:"right",tick:{fontSize:12},className:"text-muted-foreground",label:{value:h(t[1]),angle:90,position:"insideRight",style:{fontSize:12}}}),e.jsx(me,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},labelStyle:{color:"hsl(var(--popover-foreground))"},itemStyle:{color:"hsl(var(--popover-foreground))"},formatter:(r,s)=>{const u=s,l=h(u);return[`${r}${l}`,C(u)]}}),t.length>0&&e.jsx(pe,{wrapperStyle:{fontSize:12}}),t.map((r,s)=>e.jsx(he,{dataKey:r,fill:F(r),radius:[4,4,0,0],name:r,yAxisId:s===0?"left":"right"},r))]})})}),t.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:t.map(r=>{const s=S.map(b=>b[r]),u=h(r),l=Math.min(...s),x=Math.max(...s),$=Math.round(s.reduce((b,O)=>b+O,0)/s.length);return e.jsxs("div",{className:"flex justify-between items-center rounded-lg bg-white/10 dark:bg-black/20 backdrop-blur-md border border-white/20 p-2 text-xs",children:[e.jsx("div",{className:"font-semibold text-[10px] text-muted-foreground",children:C(r)}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Min"}),e.jsxs("div",{className:"font-semibold",children:[l,u]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Max"}),e.jsxs("div",{className:"font-semibold",children:[x,u]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Avg"}),e.jsxs("div",{className:"font-semibold",children:[$,u]})]})]})]},r)})})]})]})}export{De as HourlyForecast};
